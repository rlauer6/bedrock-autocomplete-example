# Server Settings
port: 80
mount_point: /
parse_templates: true
log_level: debug

# 1. The Service to Run
services:
  /birds: Bedrock::Service::Autocomplete

# 2. Static Asset Mapping
#    Maps URL path "/birds" -> Filesystem path "htdocs"
#    e.g. /birds/css/birds.css -> ./htdocs/css/birds.css
directory_index:
  /birds: index.roc

error_document:
  404: /birds/not-found.html

aliases:
  /birds/javascript/birds.js: birds.js
  /birds/css/birds.css: birds.css
  /birds/img: images
  /birds/javascript/autocomplete.js: autocomplete.js
  /birds/not-found.html: not-found.html
  /favicon.ico: favicon.ico

session:
    binding: session
    session: yes
    module: BLM::Startup::MemorySession
    config:
      cookie:
        expiry_secs: 86400
      persistence_enabled: no
      param: session

routes:
  /birds:
    '/birds/:file': /autocomplete/:file
 
  /echo:
    '/echo/hello': /

overrides:
  BEDROCK_ERROR_LOCATION: @dist_dir@/htdocs/error.roc

  autocomplete:
    # Where to find the JSON files (birds.json)
    root: .
    search_key: label
    cache: no
